@use 'variables' as v;

@mixin button-reset {
  appearance: none;
  -webkit-appearance: none;
  background: transparent;
  border: none;
  cursor: pointer;
  outline: none;
  padding: 0;
}

// M3 surface tinting — overlays accent light at varying alpha on black
@mixin surface-tint($level) {
  background-color: v.$black;

  @if $level == 1 {
    background-image: linear-gradient(rgba(var(--accent-light-rgb), 0.05), rgba(var(--accent-light-rgb), 0.05));
  } @else if $level == 2 {
    background-image: linear-gradient(rgba(var(--accent-light-rgb), 0.08), rgba(var(--accent-light-rgb), 0.08));
  } @else if $level == 3 {
    background-image: linear-gradient(rgba(var(--accent-light-rgb), 0.11), rgba(var(--accent-light-rgb), 0.11));
  } @else if $level == 4 {
    background-image: linear-gradient(rgba(var(--accent-light-rgb), 0.14), rgba(var(--accent-light-rgb), 0.14));
  }
}

// M3 state layer — ::before overlay for hover/focus/active feedback
@mixin state-layer {
  position: relative;

  &::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: v.$white;
    opacity: 0;
    pointer-events: none;
    transition: opacity v.$transition-fast;
  }

  &:hover::before {
    opacity: 0.08;
  }

  &:focus-visible::before {
    opacity: 0.12;
  }

  &:active::before {
    opacity: 0.12;
  }
}

@mixin focus-ring {
  &:focus,
  &:focus-visible {
    outline: none;
    box-shadow: var(--ring-soft);
  }
}

// M3 filled button
@mixin button-filled {
  padding: 10px 24px;
  border-radius: v.$radius-pill;
  border: none;
  cursor: pointer;
  background: var(--accent);
  color: v.$white;
  font-size: v.$fs-base;
  font-weight: v.$fw-bold;
  box-shadow: v.$elevation-1;
  @include state-layer;

  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
}

// Minimal underline-only input (title fields, composers, search)
@mixin input-underline {
  width: 100%;
  padding: 0 0 5px 0;
  border: none;
  border-bottom: 2px solid rgba(v.$white, 0.15);
  border-radius: 0;
  background: none;
  color: v.$white;
  font-size: v.$fs-base;
  outline: none;
  transition: border-color v.$transition-normal;

  &:focus {
    border-bottom-color: var(--accent-light);
  }
}

// Square icon button (toolbars, panels)
@mixin icon-button {
  width: 34px;
  height: 34px;
  border-radius: 10px;
  border: none;
  background: transparent;
  color: v.$white;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  @include state-layer;
}

// M3 filled input style
@mixin input-field {
  width: 100%;
  padding: 10px 12px;
  border-radius: v.$radius-m v.$radius-m 0 0;
  border: none;
  border-bottom: 2px solid rgba(v.$white, 0.15);
  background: rgba(v.$white, 0.06);
  color: v.$white;
  font-size: v.$fs-base;
  outline: none;
  transition: border-color v.$transition-normal, background v.$transition-normal;

  &:focus {
    border-bottom-color: var(--accent-light);
    background: rgba(v.$white, 0.08);
  }
}
